webpackJsonp([8],{22:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(4),o=a(1),i=a(27),r=a(39),s=a(80);a.n(s);a(23),n.a.config.productionTip=!1,n.a.use(o.E),a(78),o.E.start(function(){new n.a({el:"#q-app",router:i.a,store:r.a,render:function(t){return t(a(82).default)}})})},23:function(t,e){},27:function(t,e,a){"use strict";function n(t){return console.log("@/"+t+".vue"),function(){return a(29)("./"+t+".vue")}}var o=a(4),i=a(28);o.a.use(i.a),e.a=new i.a({mode:"hash",scrollBehavior:function(){return{y:0}},routes:[{path:"/",component:n("Login")},{path:"/diary",component:n("Diary")},{path:"/report",component:n("Report")},{path:"/test",component:n("Test")},{path:"*",component:n("Error404")}]})},29:function(t,e,a){function n(t){var e=o[t];return e?a.e(e[1]).then(function(){return a(e[0])}):Promise.reject(new Error("Cannot find module '"+t+"'."))}var o={"./Diary.vue":[90,0],"./Error404.vue":[91,6],"./Login.vue":[92,5],"./Report.vue":[93,4],"./Test.vue":[94,3],"./big/Bdiary.vue":[88,2],"./mobile/Mdiary.vue":[89,1]};n.keys=function(){return Object.keys(o)},n.id=29,t.exports=n},39:function(t,e,a){"use strict";var n=a(40),o=a.n(n),i=a(4),r=a(58),s=a(59),c=a.n(s),u=a(1);i.a.use(r.a);var l={spinner:u.y,spinnerColor:"primary",spinnerSize:140,message:"",messageColor:"black"},d="http://93.157.144.178:3000",f={_diaryData:"",gifLink:"",user:{login:!1,uid:"",fio:""},sescookie:"",diaryData:{currenrYear:"",prevDateLink:"",nextDateLink:"",pdata:"",wd:"",currentYear:"",studentFIO:""},report:{htmldata:{}}},g={session:function(t){c.a.get(d+"/session").then(function(e){200===e.status&&(e.data.sesson||(t.state.user.login=!1))}).catch(function(t){u.a.hide(),u.D.create.negative("ошибка обращения к серверу"),console.log(t)})},getReportData:function(t){c.a.get(d+"/fake").then(function(e){200===e.status&&t.commit("SET_REPORT_DATA",e.data)}).catch(function(t){u.a.hide(),u.D.create.negative("ошибка обращения к серверу"),console.log(t)})},login:function(t,e){u.a.show(l),t.state.user.login=!1,c.a.post(d+"/login",e).then(function(e){200===e.status&&(u.a.hide(),"login-fail"===e.data.status?u.D.create.negative("авторизация не удалась"):"login-success"===e.data.status&&(u.D.create.positive("авторизация успешна"),t.commit("SET_SESSION_COOKIE",e.data.cookie)))}).catch(function(t){u.a.hide(),u.D.create.negative("ошибка обращения к серверу"),console.log(t)})},getDiaryData:function(t){u.a.show(l),t.commit("SET_DIARY_DATA_DEF"),t.commit("SET_USER_DATA_DEF"),c.a.post(d+"/timetable/test2",{sescookie:t.state.sescookie}).then(function(e){200===e.status?(u.a.hide(),e.data.error?"session"===e.data.error_body.type?(u.D.create.negative("время сессии истекло"),t.commit("UNSET_SESSION_COOKIE")):u.D.create.negative("ошибка обработки данных"):(u.D.create.positive("загрузка закончена"),t.commit("SET_DIARY_DATA",e.data))):u.D.create.negative("что-то пошло не так (")}).catch(function(t){u.a.hide(),u.D.create.negative("ошибка обращения к серверу"),console.log(t)})},getDiaryDataFR:function(t,e){u.a.show(l),t.commit("SET_DIARY_DATA_DEF"),t.commit("SET_USER_DATA_DEF"),c.a.post(d+"/timetable/test2date",{sescookie:t.state.sescookie,studentID:e.userID,date:e.date,wd:e.wd,eduYearId:e.eduYearId,currentYear:e.currentYear,studentFIO:e.studentFIO}).then(function(e){200===e.status?(u.a.hide(),e.data.error?"session"===!e.data.error_body.type?(u.D.create.negative("время сессии истекло"),t.commit("UNSET_SESSION_COOKIE")):u.D.create.negative("ошибка обработки данных"):(u.D.create.positive("загрузка закончена"),t.commit("SET_DIARY_DATA",e.data))):u.D.create.negative("что-то пошло не так (")}).catch(function(t){u.a.hide(),u.D.create.negative("ошибка обращения к серверу"),console.log(t)})},getGIPHY:function(t,e){c.a.get(d+"/helper/gif/"+e).then(function(e){200===e.status&&t.commit("SET_GIPHY",e.data)}).catch(function(t){u.D.create.negative("ошибка обращения к серверу"),console.log(t)})}},m={SET_REPORT_DATA:function(t,e){console.log("data html",e),t.report=e},SET_SESSION_COOKIE:function(t,e){console.log("data",e),t.sescookie=e,t.user.login=!0,console.log("state.user.login",t.user.login)},UNSET_SESSION_COOKIE:function(t){t.sescookie="",t.user.login=!1},SET_DIARY_DATA_DEF:function(t){t.diaryData=void 0,console.log("state.diaryData",t.diaryData)},SET_USER_DATA_DEF:function(t){t.user.uid="",t.user.fio=""},SET_DIARY_DATA:function(t,e){console.log("==============data============",e),console.log("==============data state============",t.diaryData),t.diaryData=o()({},e),t.user.uid=e.studentID,t.user.fio=e.studentFIO,console.log("==============data user============",t.user),console.log("==============data diaryData============",t.diaryData)},SET_GIPHY:function(t,e){var a=new Image;a.onload=function(){t.gifLink=e.images.original.gif_url},a.src=e.images.original.gif_url}};e.a=new r.a.Store({state:f,actions:g,mutations:m,modules:{}})},79:function(t,e){},81:function(t,e){},82:function(t,e,a){"use strict";function n(t){a(83)}Object.defineProperty(e,"__esModule",{value:!0});var o=a(84),i=a(85),r=a(20),s=n,c=r(o.a,i.a,!1,s,null,null);e.default=c.exports},83:function(t,e){},84:function(t,e,a){"use strict";var n=a(1);e.a={name:"APP",components:{QLayout:n.s,QToolbar:n.A,QToolbarTitle:n.B,QBtn:n.b,QIcon:n.l,QList:n.t,QListHeader:n.u,QItem:n.n,QItemSide:n.q,QItemMain:n.o,QSideLink:n.x},data:function(){return{}}}},85:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-layout",{ref:"layout",attrs:{view:"lHh Lpr fff","left-class":{"bg-grey-2":!0}}},[a("q-toolbar",{attrs:{slot:"header",color:"secondary"},slot:"header"},[a("q-btn",{attrs:{flat:""},on:{click:function(e){t.$refs.layout.toggleLeft()}}},[a("q-icon",{attrs:{name:"menu"}})],1),t._v(" "),a("q-toolbar-title",[t._v("\n      VSOpen-mirror\n      "),a("div",{attrs:{slot:"subtitle"},slot:"subtitle"})])],1),t._v(" "),a("div",{attrs:{slot:"left"},slot:"left"},[a("q-list",{attrs:{"no-border":"",link:"","inset-delimiter":""}},[a("q-list-header",[t._v("VSOpen-mirror menus")]),t._v(" "),a("q-item",{on:{click:function(t){}}},[a("q-item-side",{attrs:{icon:"fa-sign-in-alt"}}),t._v(" "),a("q-side-link",{attrs:{to:"/"}},[a("q-item-main",{attrs:{label:"Авторизация",sublabel:"авторизация (логин и пароль)"}})],1)],1),t._v(" "),a("q-item",{on:{click:function(t){}}},[a("q-item-side",{attrs:{icon:"fa-calendar"}}),t._v(" "),a("q-side-link",{attrs:{to:"/diary"}},[a("q-item-main",{attrs:{label:"Дневник",sublabel:"расписание занятий, оценки, задания"}})],1)],1),t._v(" "),a("q-item",{on:{click:function(t){}}},[a("q-item-side",{attrs:{icon:"fa-graduation-cap"}}),t._v(" "),a("q-side-link",{attrs:{to:"/report"}},[a("q-item-main",{attrs:{label:"Табель",sublabel:"табель успеваемости"}})],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"layout-padding",attrs:{id:"q-app"}},[a("router-view")],1)],1)},o=[],i={render:n,staticRenderFns:o};e.a=i}},[22]);